<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">	
	<modelVersion>4.0.0</modelVersion>
	<groupId>org.idempiere</groupId>
	<artifactId>repackaged</artifactId>
	<packaging>pom</packaging>
	<version>9.0.0</version>
	
	<repositories>
		<repository>
			<id>Central</id>
		        <url>https://repo1.maven.org/maven2</url>
	       </repository>
	</repositories>

	<properties>
		<timestamp>${maven.build.timestamp}</timestamp>
   		<maven.build.timestamp.format>yyyyMMddHHmm</maven.build.timestamp.format>
		<atmosphere-runtime.version>2.7.2</atmosphere-runtime.version>
		<xml.ws-api.version>2.3.3</xml.ws-api.version>
		<fastinfoset.version>1.2.18</fastinfoset.version>
		<webconsole.version>4.6.4</webconsole.version>
		<guava.version>30.1.1-jre</guava.version>
		<google-http-client.version>1.39.2-sp.1</google-http-client.version>
		<poi.version>4.1.2</poi.version>
	</properties>
	<build>
		<plugins>
			<plugin>
				<groupId>org.reficio</groupId>
				<artifactId>p2-maven-plugin</artifactId>
				<version>1.7.0</version>
				<executions>
					<execution>
						<id>default-cli</id>
						<phase>package</phase>
						<goals>
							<goal>site</goal>
						</goals>
						<configuration>
							<skipInvalidArtifacts>false</skipInvalidArtifacts>
  							<skipNotExistingArtifacts>false</skipNotExistingArtifacts>
							<featureDefinitions>
								<feature>
									<id>org.idempiere.repackaged.feature</id>
									<version>${project.version}</version>
									<label>iDempiere repackaged feature</label>
									<providerName>iDempiere</providerName>
									<description>maven artifact repackaged as osgi bundle</description>
									<copyright>Idempiere</copyright>
									<license>GPL v2.1</license>
									<generateSourceFeature>true</generateSourceFeature>
									<artifacts>
										<artifact>
											<id>org.atmosphere:atmosphere-runtime:${atmosphere-runtime.version}</id>
											<source>true</source>
											<transitive>false</transitive>
											<override>true</override>
											<instructions>
												<Import-Package>*;resolution:=optional</Import-Package>
												<Export-Package>*;version="${atmosphere-runtime.version}";-noimport:=true</Export-Package>
												<Bundle-Version>${atmosphere-runtime.version}.v${maven.build.timestamp}</Bundle-Version>
												<Provide-Capability>osgi.serviceloader;osgi.serviceloader="javax.servl
												 et.ServletContainerInitializer",osgi.serviceloader;osgi.serviceloader
												 ="org.atmosphere.inject.CDIProducer",osgi.serviceloader;osgi.servicel
												 oader="org.atmosphere.inject.Injectable"
												</Provide-Capability>
												<Require-Capability><![CDATA[osgi.ee;filter:="(&(osgi.ee=JavaSE)(version=1.8))"
												 ,osgi.extender;filter:="(osgi.extender=osgi.serviceloader.processor)"
												 ,osgi.extender;filter:="(osgi.extender=osgi.serviceloader.registrar)"
												 ,osgi.serviceloader;cardinality:=multiple;filter:="(osgi.serviceloade
												 r=org.atmosphere.inject.Injectable)"
												 ]]>
												</Require-Capability>
											</instructions>
										</artifact>
										<artifact>
											<id>jakarta.xml.ws:jakarta.xml.ws-api:${xml.ws-api.version}</id>
											<source>true</source>
											<transitive>false</transitive>
											<override>true</override>
											<instructions>
												<DynamicImport-Package>org.glassfish.hk2.osgiresourcelocator</DynamicImport-Package>
												<Import-Package>*;resolution:=optional</Import-Package>
        											<Export-Package>*;version="${xml.ws-api.version}";-noimport:=true</Export-Package>
												<_removeheaders>Private-Package</_removeheaders>
												<Bundle-Version>${xml.ws-api.version}.v${maven.build.timestamp}</Bundle-Version>
											</instructions>
										</artifact>
										<artifact>
											<id>com.sun.xml.fastinfoset:FastInfoset:${fastinfoset.version}</id>
											<source>true</source>
											<transitive>false</transitive>
											<override>true</override>
											<instructions>
												<Import-Package>*;resolution:=optional</Import-Package>
        											<Export-Package>*;version="${fastinfoset.version}";-noimport:=true</Export-Package>
												<Bundle-Version>${fastinfoset.version}.v${maven.build.timestamp}</Bundle-Version>
											</instructions>
										</artifact>
										<artifact>
											<id>org.apache.felix:org.apache.felix.webconsole:${webconsole.version}</id>
											<source>true</source>
											<transitive>false</transitive>
											<override>true</override>
											<instructions>
												<DynamicImport-Package><![CDATA[org.apache.felix.bundlerepository;version="[2.0
												 ,3)",org.osgi.service.cm;version="[1.5,2)",org.osgi.service.condperma
												 dmin;version="[1.0,2)",org.osgi.service.log;version="[1.3,2)",org.osg
												 i.service.metatype;version="[1.4,2)",org.osgi.service.obr;version="[1
												 .0,2)",org.osgi.service.permissionadmin;version="[1.2,2)",org.osgi.se
												 rvice.prefs;version="[1.1,2)",org.osgi.service.wireadmin;version="[1.
												 0,2)"]]></DynamicImport-Package>
												<Import-Package><![CDATA[
												javax.servlet,javax.servlet.http,org.apache.commons.fileupload;version="[1.4,2)",
												org.apache.commons.fileupload.disk;version="[1.4,2)",
												org.apache.commons.fileupload.servlet;version="[1.4,2)",
												org.apache.commons.io;version="[1.4,2)",org.apache.felix.webconsole;version="[3.4,3.5)",
												org.apache.felix.webconsole.bundleinfo;version="[1.0,1.1)",
												org.osgi.framework;version="[1.8,2)",org.osgi.framework.wiring;version="[1.2,2)",
												org.osgi.service.http;version="[1.2,2)",
												org.osgi.service.packageadmin;version="[1.2,2)",
												org.osgi.service.startlevel;version="[1.1,2)",
												org.osgi.util.tracker;version="[1.5,2)"
												]]></Import-Package>
        											<Export-Package><![CDATA[
        											org.apache.felix.webconsole;uses:="javax.servlet,
        											javax.servlet.http,org.osgi.framework";version="3.4.0",
												org.apache.felix.webconsole.bundleinfo;uses:="org.osgi.framework";version="1.0.0",
												org.apache.felix.webconsole.i18n;uses:="org.osgi.framework";version="1.0.0"
												]]></Export-Package>
												<_removeheaders>Private-Package</_removeheaders>
												<Bundle-Version>${webconsole.version}.v${maven.build.timestamp}</Bundle-Version>
												<Bundle-Activator>
													org.apache.felix.webconsole.internal.OsgiManagerActivator
												</Bundle-Activator>
											</instructions>
										</artifact>
										<artifact>
											<id>com.google.guava:guava:${guava.version}</id>
											<source>true</source>
											<transitive>false</transitive>
											<override>true</override>
											<instructions>
												<Import-Package><![CDATA[
												com.google.common.util.concurrent.internal;version="[1.0
												 ,2)",javax.annotation;resolution:=optional,javax.cryp
												 to;resolution:=optional,javax.crypto.spec;resolution:=optional,sun.misc
												 ;resolution:=optional
												]]></Import-Package>
        											<Export-Package><![CDATA[
        											com.google.common.annotations;version="30.1.1",com.googl
												 e.common.base;version="30.1.1",com.google.common.cache;version="30.1.1"
												 ;uses:="com.google.common.base,com.google.common.collect,com.google.com
												 mon.util.concurrent",com.google.common.collect;version="30.1.1";uses:="
												 com.google.common.base",com.google.common.escape;version="30.1.1";uses:
												 ="com.google.common.base",com.google.common.eventbus;version="30.1.1",c
												 om.google.common.graph;version="30.1.1";uses:="com.google.common.collec
												 t",com.google.common.hash;version="30.1.1";uses:="com.google.common.bas
												 e",com.google.common.html;version="30.1.1";uses:="com.google.common.esc
												 ape",com.google.common.io;version="30.1.1";uses:="com.google.common.bas
												 e,com.google.common.collect,com.google.common.graph,com.google.common.h
												 ash",com.google.common.math;version="30.1.1",com.google.common.net;vers
												 ion="30.1.1";uses:="com.google.common.base,com.google.common.collect,co
												 m.google.common.escape",com.google.common.primitives;version="30.1.1";u
												 ses:="com.google.common.base",com.google.common.reflect;version="30.1.1
												 ";uses:="com.google.common.collect,com.google.common.io",com.google.com
												 mon.util.concurrent;version="30.1.1";uses:="com.google.common.base,com.
												 google.common.collect,com.google.common.util.concurrent.internal",com.g
												 oogle.common.xml;version="30.1.1";uses:="com.google.common.escape"
												]]></Export-Package>
												<Bundle-Version>${guava.version}.v${maven.build.timestamp}</Bundle-Version>
											</instructions>
										</artifact>
										<artifact>
											<id>com.google.http-client:google-http-client:${google-http-client.version}</id>
											<source>true</source>
											<transitive>false</transitive>
											<override>true</override>
											<instructions>
												<Import-Package><![CDATA[
												com.google.common.base;version="[30.1,31)",com.google.
												 common.collect;version="[30.1,31)",com.google.common.io;version="[30.
												 1,31)",com.google.common.util.concurrent;version="[30.1,31)",io.openc
												 ensus.common,io.opencensus.contrib.http.util,io.opencensus.trace,io.o
												 pencensus.trace.export,io.opencensus.trace.propagation,javax.annotati
												 on,javax.net.ssl,org.apache.http,org.apache.http.cl
												 ient,org.apache.http.client.methods,org.apache.http.conn,org.apache.h
												 ttp.conn.params,org.apache.http.conn.routing,org.apache.http.conn.sch
												 eme,org.apache.http.conn.ssl,org.apache.http.entity,org.apache.http.i
												 mpl.client,org.apache.http.impl.conn,org.apache.http.impl.conn.tsccm,
												 org.apache.http.message,org.apache.http.params,org.apache.http.protoc
												 ol
												]]></Import-Package>
        											<Export-Package><![CDATA[
        											com.google.api.client.util;version="1.39.2";uses:="jav
												 ax.net.ssl",com.google.api.client.util.store;version="1.39.2",com.goo
												 gle.api.client.util.escape;version="1.39.2",com.google.api.client.htt
												 p;version="1.39.2";uses:="com.google.api.client.util,io.opencensus.tr
												 ace,io.opencensus.trace.propagation,javax.annotation",com.google.api.
												 client.http.javanet;version="1.39.2";uses:="com.google.api.client.htt
												 p,javax.net.ssl",com.google.api.client.http.apache;version="1.39.2";u
												 ses:="com.google.api.client.http,org.apache.http,org.apache.http.clie
												 nt,org.apache.http.conn.ssl,org.apache.http.impl.client,org.apache.ht
												 tp.params",com.google.api.client.http.json;version="1.39.2";uses:="co
												 m.google.api.client.http,com.google.api.client.json",com.google.api.c
												 lient.testing.util;version="1.39.2";uses:="com.google.api.client.util
												 ",com.google.api.client.testing.http;version="1.39.2";uses:="com.goog
												 le.api.client.http,com.google.api.client.util",com.google.api.client.
												 testing.http.javanet;version="1.39.2",com.google.api.client.testing.h
												 ttp.apache;version="1.39.2";uses:="org.apache.http,org.apache.http.cl
												 ient,org.apache.http.conn,org.apache.http.conn.routing,org.apache.htt
												 p.impl.client,org.apache.http.params,org.apache.http.protocol",com.go
												 ogle.api.client.testing.json.webtoken;version="1.39.2";uses:="com.goo
												 gle.api.client.json.webtoken,javax.net.ssl",com.google.api.client.tes
												 ting.json;version="1.39.2";uses:="com.google.api.client.json",com.goo
												 gle.api.client.json;version="1.39.2";uses:="com.google.api.client.uti
												 l",com.google.api.client.json.webtoken;version="1.39.2";uses:="com.go
												 ogle.api.client.json,com.google.api.client.util,javax.net.ssl",com.go
												 ogle.api.client.json.rpc2;version="1.39.2";uses:="com.google.api.clie
												 nt.util"
        											]]></Export-Package>
												<Bundle-Version>${google-http-client.version}.v${maven.build.timestamp}</Bundle-Version>
											</instructions>
										</artifact>
										<artifact>
											<id>org.apache.poi:poi-ooxml-schemas:${poi.version}</id>
											<source>true</source>
											<transitive>false</transitive>
											<override>true</override>
											<instructions>
												<Import-Package>com.microsoft.schemas.office.powerpoint;resolution:=op
												 tional,com.microsoft.schemas.office.word;resolution:=optional,javax.x
												 ml.namespace;resolution:=optional,javax.xml.stream;resolution:=option
												 al,org.apache.xmlbeans;resolution:=optional,org.apache.xmlbeans.impl.
												 values;resolution:=optional,org.apache.xmlbeans.impl.xb.xmlschema;res
												 olution:=optional,org.apache.xmlbeans.xml.stream;resolution:=optional
												 ,org.openxmlformats.schemas.officeDocument.x2006.math;resolution:=opt
												 ional,org.openxmlformats.schemas.schemaLibrary.x2006.main;resolution:
												 =optional,org.w3c.dom;resolution:=optional
												 ,org.apache.xmlbeans.impl.schema;resolution:=optional
												 </Import-Package>
        											<Export-Package>*;version="${poi.version}";-noimport:=true</Export-Package>
												<Bundle-Version>${poi.version}.v${maven.build.timestamp}</Bundle-Version>
											</instructions>
										</artifact>
									</artifacts>
								</feature>
							</featureDefinitions>
						</configuration>
					</execution>
				</executions>
			</plugin>
		</plugins>
	</build>
</project>
